<ion-content class="outer">
  <div class="content">

    <div *ngIf="!isEmailLogin; else emailLogin" [@fadeScaleInOut] class="buttons-container">
      <div class="buttons">
        <ion-button color="tertiary" (click)="emailLoginChosen()" expand="block" padding>
          <ion-icon slot="start" name="mail"></ion-icon>
          Mit E-Mail anmelden
        </ion-button>

        <ion-button class="google" (click)="loginWithGoogle()" expand="block" padding>
          <ion-icon slot="start" name="logo-google"></ion-icon>
          Mit Google Anmelden
        </ion-button>

        <ion-button class="facebook" (click)="loginWithFacebook()" expand="block" padding>
          <ion-icon slot="start" name="logo-facebook"></ion-icon>
          Mit Facebook Anmelden
        </ion-button>

        <!--<ion-button class="twitter" (click)="loginWithTwitter()" expand="block" padding>-->
        <!--<ion-icon slot="start" name="logo-twitter"></ion-icon>-->
        <!--Mit Twitter Anmelden-->
        <!--</ion-button>-->

        <ion-button class="github" (click)="loginWithGithub()" expand="block" padding>
          <ion-icon slot="start" name="logo-github"></ion-icon>
          Mit Github Anmelden
        </ion-button>
      </div>
    </div>
  </div>
</ion-content>

<ng-template #emailLogin>
  <ion-card color="light" class="email-card" [@fadeScaleInOut]>
    <ion-card-header class="card-header">
      <ion-card-title>
        {{ formTitle }}
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <form [formGroup]="activeForm" (ngSubmit)="emailFormSubmit()" (keydown.enter)="emailFormSubmit()">
        <ion-item>
          <ion-label color="primary" class="label" position="floating">E-Mail</ion-label>
          <ion-input formControlName="email"></ion-input>
        </ion-item>
        <div class="error" *ngIf="emailRequired" [@expandCollapse]>Pflichtfeld</div>
        <div class="error" *ngIf="emailValid" [@expandCollapse]>
          Geben sie eine g&uuml;ltige E-Mail Adresse an
        </div>

        <!-- Optional First Name -->
        <ion-item *ngIf="isRegistering">
          <ion-label color="primary" class="label" position="floating">Vorname
            <small>Optional</small>
          </ion-label>
          <ion-input formControlName="firstName"></ion-input>
        </ion-item>

        <ion-item *ngIf="isRegistering">
          <ion-label color="primary" class="label" position="floating">Nachname
            <small>Optional</small>
          </ion-label>
          <ion-input formControlName="lastName"></ion-input>
        </ion-item>

        <!-- Password field -->
        <ion-item *ngIf="isEmailChecked" [@expandCollapse]>
          <ion-label color="primary" position="floating">Passwort</ion-label>
          <ion-input #passwordInput type="password" formControlName="password"></ion-input>
        </ion-item>
        <div class="error" *ngIf="passwordRequired" [@expandCollapse]>Pflichtfeld</div>
        <div class="error" *ngIf="passwordHasLengthSix" [@expandCollapse]>Das Passwort muss mindestens 6 Zeichen lang
          sein.
        </div>
        <ion-button class="resetPasswordBtn" padding *ngIf="showResetPasswordButton" color="tertiary" fill="clear" size="small" [@expandCollapse]
                    (click)="resetPassword()">Wollen Sie Ihr Passwort zur&uuml;cksetzen?
        </ion-button>
        <p padding [@expandCollapse] *ngIf="showPasswordResetMailSent" class="tertiary">
          Es wurde Ihnen eine E-Mail zum Zur&uuml;cksetzen des Passworts zugesendet.</p>

        <!-- Repeat Password field, when registering-->
        <ion-item *ngIf="isRegistering" [@expandCollapse]>
          <ion-label color="primary" position="floating">Passwort wiederholen</ion-label>
          <ion-input type="password" formControlName="repeatPassword"></ion-input>
        </ion-item>
        <div class="error" *ngIf="repeatPasswordRequired" [@expandCollapse]>Pflichtfeld</div>
        <div class="error" *ngIf="repeatPasswordMismatch" [@expandCollapse]>
          Passw&ouml;rter stimmen nicht &uuml;berein
        </div>

        <ion-item *ngIf="isRegistering">
          <ion-label>Datenschutzerkl&auml;rung gelesen</ion-label>
          <ion-checkbox slot="end" formControlName="readDataProtection"></ion-checkbox>
        </ion-item>
        <div class="error" *ngIf="readDataProtection" [@expandCollapse]>
          Bitte lesen Sie die Datenschutzerkl&auml;rung und best&auml;tigen es anschlie&szlig;end.
        </div>

        <!-- Make enter to submit-->
        <div class="submit-buttons">
          <ion-button tabindex="1" fill="outline" type="button" (click)="cancelEmailLogin()" padding>Abbrechen
          </ion-button>
          <ion-button color="primary" padding type="submit">{{ buttonText }}</ion-button>
        </div>

      </form>
      <a routerDirection="root" routerLink="/imprint">Datenschutzerkl&auml;rung</a>
    </ion-card-content>
    <chy-loading-overlay *ngIf="isLoading" [@fadeInOut]></chy-loading-overlay>
  </ion-card>
</ng-template>
